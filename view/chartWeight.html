<style>
    .chart-container {
        margin: auto;
        margin-top: 50px;
        position: relative;
        height: 80vh;
        width: 85vw;
    }
</style>

<div class="chart-container">   
    <canvas id="myChart"></canvas>
</div>

<script defer>
    var datas = [];
    var labels = [];

    request('php/getWeight.php', 'POST', null, function(data) {
        data = JSON.parse(data);
        
        for(i in data) {
            obj = {
                x: moment(data[i].day),
                y: data[i].weight
            }
            datas.push(obj);
            labels.push(moment(data[i].day));
        }
        console.log(datas[0].x.get('date'));
        datas.sort(function(a, b){
            a = a.x.get('date');
            b = b.x.get('date');
            
            if(a > b) return 1;
            if(a < b) return -1;
            return 0;
        });
        var ctx = document.getElementById("myChart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Weight',
                    data: datas,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 3,
					pointRadius: 3,
					fill: true,
					lineTension: 0,
                }]
            },
            options: {
                scales: {
                    xAxes: [{
                        type: 'time',
                        time: {
                            parser: 'YYYY-MM-DD',
                            unit: 'day',
                            toolTipFormat: 'YYYY-MM-DD',
                            displayFormats: {
                                week: 'YYYY'
                            },
                        }
                    }],
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });
    });
</script>